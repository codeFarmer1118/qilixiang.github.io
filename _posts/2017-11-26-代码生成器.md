---
layout:     post
title:      代码生成器
subtitle:   三种代码生成的方法
date:       2017-11-26
author:     Static
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - CodeGenerator
---

### 总结下博主最近学的代码生成器

### 分为三种方法

#### 第一种：
> 利用mybatis-generator-core-1.3.5.jar和mysql-connector-java-5.1.18.jar两个jar包

##### 1. 在我的电脑D盘中创建一个generator目录

![目录结构](/img/CodeGenerator/目录结构.PNG)

##### 2. 修改generator.xml中的代码

```
<?xml version="1.0" encoding="UTF-8"?>  
    <!DOCTYPE generatorConfiguration PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN" "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd">  
    <generatorConfiguration>  
        <!-- 数据库驱动包位置 -->  
        <classPathEntry location="D:\generator\mysql-connector-java-5.1.18.jar" />   
        <!-- <classPathEntry location="C:\oracle\product\10.2.0\db_1\jdbc\lib\ojdbc14.jar" />-->  
        <context id="DB2Tables" targetRuntime="MyBatis3">  
            <commentGenerator>  
                <property name="suppressAllComments" value="true" />  
            </commentGenerator>  
            <!-- 数据库链接URL、用户名、密码 -->  
             <jdbcConnection driverClass="com.mysql.jdbc.Driver" connectionURL="jdbc:mysql://localhost:3306/emp?characterEncoding=utf8" userId="root" password="123456">   
            <!--<jdbcConnection driverClass="oracle.jdbc.driver.OracleDriver" connectionURL="jdbc:oracle:thin:@localhost:1521:orcl" userId="msa" password="msa">-->  
            </jdbcConnection>  
            <javaTypeResolver>  
                <property name="forceBigDecimals" value="false" />  
            </javaTypeResolver>  
            <!-- 生成模型的包名和位置 -->  
            <javaModelGenerator targetPackage="andy.model" targetProject="D:\generator\src">  
                <property name="enableSubPackages" value="true" />  
                <property name="trimStrings" value="true" />  
            </javaModelGenerator>  
            <!-- 生成的映射文件包名和位置 -->  
            <sqlMapGenerator targetPackage="andy.mapping" targetProject="D:\generator\src">  
                <property name="enableSubPackages" value="true" />  
            </sqlMapGenerator>  
            <!-- 生成DAO的包名和位置 -->  
            <javaClientGenerator type="XMLMAPPER" targetPackage="andy.dao" targetProject="D:\generator\src">  
                <property name="enableSubPackages" value="true" />  
            </javaClientGenerator>  
            <!-- 要生成那些表(更改tableName和domainObjectName就可以) -->  
            <table tableName="student" domainObjectName="Student" enableCountByExample="false" enableUpdateByExample="false" enableDeleteByExample="false" enableSelectByExample="false" selectByExampleQueryId="false" />  
            <!-- <table tableName="course_info" domainObjectName="CourseInfo" enableCountByExample="false" enableUpdateByExample="false" enableDeleteByExample="false" enableSelectByExample="false" selectByExampleQueryId="false" />  
            <table tableName="course_user_info" domainObjectName="CourseUserInfo" enableCountByExample="false" enableUpdateByExample="false" enableDeleteByExample="false" enableSelectByExample="false" selectByExampleQueryId="false" /> -->  
        </context>  
</generatorConfiguration>  
```
##### 3.打开cmd，进入mybatis-generator-core-1.3.5.jar所在的目录，输入
```
java -jar mybatis-generator-core-1.3.5.jar -configfile generator.xml -overwrite
```

提示*MyBatis Generator finished successfully, there were warnings.* 表示生成成功。

![目录结构](/img/CodeGenerator/cmd提示生成成功.png)

#### 第二种：

> 利用Maven的代码生成器的插件，默认大家已会Maven

##### 1. 所需依赖：
```
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.34</version>
</dependency>
```

##### 2. Maven插件
```
<plugin>
     <groupId>org.mybatis.generator</groupId>
     <artifactId>mybatis-generator-maven-plugin</artifactId>
     <version>1.3.2</version>
     <configuration>
     <verbose>true</verbose>
     <overwrite>true</overwrite><!--重写生成会覆盖原先的代码-->
     </configuration>
</plugin>
```
##### 3. 代码生成的配置文件generatorConfig.xml,根据项目来修改配置文件。
```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE generatorConfiguration PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd" >
<generatorConfiguration>

    <!--classPathEntry:数据库的JDBC驱动 -->
    <classPathEntry
            location="C:\Users\qilixiang\.m2\repository\mysql\mysql-connector-java\5.1.34\mysql-connector-java-5.1.34.jar"/>

    <context id="MysqlTables" targetRuntime="MyBatis3">

        <!-- 注意这里面的顺序确定的，不能随变更改 -->
        <!-- 自定义的分页插件 <plugin type="com.deppon.foss.module.helloworld.shared.PaginationPlugin"/> -->

        <!-- 可选的（0 or 1） -->
        <!-- 注释生成器 -->
        <commentGenerator>
            <!-- 是否去除自动生成的注释 true：是 ： false:否 -->
            <property name="suppressAllComments" value="true"/>
        </commentGenerator>

        <!-- 必须的（1 required） -->
        <!--数据库连接的信息：驱动类、连接地址、用户名、密码 -->
        <jdbcConnection driverClass="com.mysql.jdbc.Driver"
                        connectionURL="jdbc:mysql://localhost:3306/work_attendance"
                        userId="root" password="123456">
        </jdbcConnection>

        <!-- 可选的（0 or 1） -->
        <!-- 类型转换器或者加类型解析器 -->
        <!-- 默认false，把JDBC DECIMAL 和 NUMERIC 类型解析为 Integer true，把JDBC DECIMAL 和
            NUMERIC 类型解析为java.math.BigDecimal -->
        <javaTypeResolver>
            <property name="forceBigDecimals" value="false"/>
        </javaTypeResolver>


        <!-- 必须的（1 required） -->
        <!-- java模型生成器 -->
        <!-- targetProject:自动生成代码的位置 -->
        <javaModelGenerator targetPackage="top.qilixiang.attendence.entity"
                            targetProject="D:\code\project\do-call\src\main\java"
        >
            <!-- TODO enableSubPackages:是否让schema作为包的后缀 -->
            <property name="enableSubPackages" value="true"/>
            <!-- 从数据库返回的值被清理前后的空格 -->
            <property name="trimStrings" value="true"/>
        </javaModelGenerator>

        <!-- 必须的（1 required） -->
        <!-- map xml 生成器 -->
        <sqlMapGenerator targetPackage="top.qilixiang.attendence.dao"
                         targetProject="D:\code\project\do-call\src\main\java">
            <property name="enableSubPackages" value="true"/>
        </sqlMapGenerator>

        <!-- 可选的（0 or 1） -->
        <!-- mapper 或者就是dao接口生成器 -->
        <javaClientGenerator targetPackage="top.qilixiang.attendence.dao"
                             targetProject="D:\code\project\do-call\src\main\java"
                             type="XMLMAPPER">
            <property name="enableSubPackages" value="true"/>
        </javaClientGenerator>

        <table tableName="attendence" domainObjectName="Attendence"
               enableInsert="true" enableCountByExample="false" enableUpdateByExample="false"
               enableDeleteByExample="false"
               enableSelectByExample="false" selectByExampleQueryId="false">
            <!-- 忽略字段 可选的（0 or 1） -->
            <!-- <ignoreColumn column="is_use" /> -->
            <!--无论字段是什么类型，生成的类属性都是varchar。 可选的（0 or 1） 测试无效 -->
            <!-- <columnOverride column="city_code" jdbcType="VARCHAR" /> -->
        </table>

    </context>
    
</generatorConfiguration>
```

##### 4. 进入当前项目的根目录，在cmd中输入
```
mvn mybatis-generator:generate -e //-e表示在cmd中显示日志
```
![方法二cmd命令](/img/CodeGenerator/方法二cmd.png)

也可以配置idea命令

![方法二idea命令](/img/CodeGenerator/方法二idea命令.png)


cmd提示：

![方法二idea生成成功](/img/CodeGenerator/方法二idea生成成功.png)

生成成功，目录结构：

![方法二生成成功目录结构](/img/CodeGenerator/方法二生成成功目录结构.png)


### 第三种

